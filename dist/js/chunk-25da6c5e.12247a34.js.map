{"version":3,"sources":["webpack:///./src/views/Forget.vue?8421","webpack:///src/views/Forget.vue","webpack:///./src/views/Forget.vue?32f9","webpack:///./src/views/Forget.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./src/assets/js/validForm.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","goback","isnext","submit","model","value","info","callback","$$v","$set","expression","isEye","viewPasswordType","_v","begin","key","scopedSlots","_u","fn","isSent","sentCode","_s","msg","proxy","next","staticRenderFns","component","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","protoProps","staticProps","prototype","ValidForm","validUserFormReg","nickName","reg","phone","password","oldPassword","email","code","o","test"],"mappings":"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","file":"js/chunk-25da6c5e.12247a34.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"forget\"},[_c('van-nav-bar',{attrs:{\"title\":\"找回密码\",\"left-text\":\"返回\"},on:{\"click-left\":_vm.goback}}),_c('div',{staticClass:\"forget-box\"},[(!_vm.isnext)?_c('div',[_c('van-form',[_c('van-field',{attrs:{\"type\":\"text\",\"label\":\"邮箱\",\"placeholder\":\"邮箱地址\"},model:{value:(_vm.begin.email),callback:function ($$v) {_vm.$set(_vm.begin, \"email\", $$v)},expression:\"begin.email\"}}),_c('van-field',{key:\"code\",attrs:{\"type\":\"text\",\"label\":\"验证码\",\"placeholder\":\"6位验证码\"},scopedSlots:_vm._u([{key:\"button\",fn:function(){return [_c('van-button',{attrs:{\"size\":\"small\",\"disabled\":_vm.isSent},on:{\"click\":_vm.sentCode}},[_vm._v(_vm._s(_vm.msg))])]},proxy:true}],null,false,119457608),model:{value:(_vm.begin.code),callback:function ($$v) {_vm.$set(_vm.begin, \"code\", $$v)},expression:\"begin.code\"}}),_c('div',{staticClass:\"register-btn\"},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"},on:{\"click\":_vm.next}},[_vm._v(\"下一步\")])],1)],1)],1):_c('div',[_c('van-form',{on:{\"submit\":_vm.submit}},[_c('van-field',{attrs:{\"type\":\"text\",\"label\":\"手机号\",\"placeholder\":\"手机号\",\"clearable\":\"\",\"left-icon\":\"phone-o\"},model:{value:(_vm.info.phone),callback:function ($$v) {_vm.$set(_vm.info, \"phone\", $$v)},expression:\"info.phone\"}}),_c('van-field',{attrs:{\"type\":_vm.isEye ? 'text' : 'password',\"label\":\"新密码\",\"placeholder\":\"请输入您的新密码\",\"left-icon\":\"contact\",\"right-icon\":_vm.isEye ? 'eye-o' : 'closed-eye'},on:{\"click-right-icon\":_vm.viewPasswordType},model:{value:(_vm.info.password),callback:function ($$v) {_vm.$set(_vm.info, \"password\", $$v)},expression:\"info.password\"}}),_c('div',{staticClass:\"register-btn\"},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\"}},[_vm._v(\"提交\")])],1)],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"forget\">\r\n         <van-nav-bar title=\"找回密码\" left-text=\"返回\"  @click-left=\"goback\" />\r\n         <div class=\"forget-box\">\r\n             <div v-if=\"!isnext\">\r\n                 <van-form>\r\n                    <van-field\r\n                        v-model=\"begin.email\"\r\n                        type=\"text\"\r\n                        label=\"邮箱\"\r\n                        placeholder=\"邮箱地址\"\r\n                    />\r\n                    <van-field\r\n                        key=\"code\"\r\n                        v-model=\"begin.code\"\r\n                        type=\"text\"\r\n                        label=\"验证码\"\r\n                        placeholder=\"6位验证码\">\r\n\r\n                        <template #button>\r\n                           <van-button size=\"small\" :disabled=\"isSent\" @click=\"sentCode\" >{{msg}}</van-button>\r\n                        </template>\r\n                    </van-field>\r\n            \r\n                    <div class=\"register-btn\">\r\n                        <van-button round block type=\"info\" native-type=\"submit\" @click=\"next\">下一步</van-button>\r\n                    </div>\r\n                 </van-form>\r\n             </div>\r\n\r\n             <div v-else>\r\n                 <van-form @submit=\"submit\">\r\n                      <van-field\r\n                        v-model=\"info.phone\"\r\n                    \r\n                        type=\"text\"\r\n                        label=\"手机号\"\r\n                        placeholder=\"手机号\"\r\n                        clearable\r\n                        left-icon=\"phone-o\"\r\n                    >\r\n                        \r\n                    </van-field>\r\n                    <van-field\r\n                        v-model=\"info.password\"\r\n                        :type=\"isEye ? 'text' : 'password'\"\r\n                        label=\"新密码\"\r\n                        placeholder=\"请输入您的新密码\"\r\n                        left-icon=\"contact\"\r\n                        :right-icon=\"isEye ? 'eye-o' : 'closed-eye'\"\r\n                        @click-right-icon=\"viewPasswordType\"\r\n                    />\r\n                    <div class=\"register-btn\">\r\n                        <van-button round block type=\"info\" native-type=\"submit\">提交</van-button>\r\n                    </div>\r\n                 </van-form>\r\n             </div>\r\n         </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport '../assets/css/forget.less'\r\nimport validForm from '../assets/js/validForm'\r\n    export default {\r\n        data(){\r\n            return {\r\n                isnext:false,\r\n                begin:{\r\n                    email:'',\r\n                    code:''\r\n                },\r\n\r\n                info:{\r\n                    phone:'',\r\n                    password:''\r\n                },\r\n\r\n                isEye:false,\r\n                msg:'发送验证码',\r\n                isSent:false\r\n            }\r\n        },\r\n\r\n        methods:{\r\n            goback(){\r\n                if(this.isnext){\r\n                    this.isnext=false;\r\n                }else{\r\n                    this.$router.go(-1);\r\n                }\r\n            },\r\n\r\n            //切换显示密码的方式\r\n            viewPasswordType(){\r\n                this.isEye=!this.isEye;\r\n            },\r\n\r\n\r\n            //下一步\r\n            next(){\r\n                if(!validForm.validUserForm(this.begin)){\r\n                    return;\r\n                }\r\n\r\n                //发送验证码请求\r\n                this.$toast.loading({\r\n                    message:'加载中...',\r\n                    forbidClick:true,\r\n                    duration:0\r\n                });\r\n\r\n\r\n                this.axios({\r\n                    method:'POST',\r\n                    url:'/checkValidCode',\r\n                    data:{\r\n                        appkey:this.appkey,\r\n                        validcode:this.begin.code\r\n                    }\r\n                }).then(result =>{\r\n                    this.$toast.clear();\r\n\r\n                    if(result.data.code=='K001'){\r\n                        this.isnext=true;\r\n                    }else{\r\n                        this.$toast(result.data.msg);\r\n                    }\r\n                }).catch(err =>{\r\n                    this.$toast.clear();\r\n                })\r\n                \r\n            },\r\n\r\n            //发送验证码\r\n            sentCode(){\r\n                if(!validForm.validUserForm({email:this.begin.email})){\r\n                    return;\r\n                }\r\n\r\n                //获取邮箱验证码\r\n                let time=60;\r\n                this.msg=time+ '秒后重新发送';\r\n                this.isSent=true;\r\n                let timer = setInterval(()=>{\r\n                    if(time ==0){\r\n                        clearInterval(timer);\r\n                        timer=null;\r\n                        this.msg='发送验证码';\r\n                        this.isSent=false;\r\n                    }else {\r\n                        time--;\r\n                        this.msg = time + '秒后重新发送';\r\n\r\n                    }\r\n                },1000);\r\n\r\n                //发起发送验证码请求\r\n                this.$toast.loading({\r\n                    message:'加载中...',\r\n                    forbidClick:true,\r\n                    duration:0\r\n                });\r\n\r\n                this.axios({\r\n                    method:'POST',\r\n                    url:'/emailValidCode',\r\n                    data:{\r\n                        appkey:this.appkey,\r\n                        email:this.begin.email\r\n                    }\r\n                }).then(result =>{\r\n                    this.$toast.clear();\r\n                    this.$toast(result.data.msg);\r\n                }).catch(err =>{\r\n                    this.$toast.clear();\r\n                })\r\n            },\r\n\r\n            //提交 找回密码\r\n            submit(){\r\n                if(!validForm.validUserForm(this.info)){\r\n                    return;\r\n                }\r\n\r\n                thid.$toast.loading({\r\n                    message:'加载中...',\r\n                    forbidClick:true,\r\n                    duration:0\r\n                })\r\n\r\n                this.axios({\r\n                    method:'POST',\r\n                    url:'/retrievePassword',\r\n                    data:{\r\n                        appkey:this.appkey,\r\n                        phone:this.info.phone,\r\n                        password:this.info.password\r\n                    }\r\n                }).then(result =>{\r\n                    this.$toast.clear();\r\n\r\n                    if(result.data.code=='L001'){\r\n                        this.$toast.push({name:'Login'});\r\n                    }else {\r\n                        this.$toast(result.data.msg);\r\n                    }\r\n                }).catch(err =>{\r\n                    this.$toast.clear();\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Forget.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Forget.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Forget.vue?vue&type=template&id=56ef1bdf&scoped=true&\"\nimport script from \"./Forget.vue?vue&type=script&lang=js&\"\nexport * from \"./Forget.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"56ef1bdf\",\n  null\n  \n)\n\nexport default component.exports","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","\r\nimport {Toast} from 'vant';\r\nclass ValidForm{\r\n    constructor(){\r\n        this.validUserFormReg={\r\n\r\n            //昵称：1-10个字符 汉字字母数字组合\r\n            nickName:{\r\n                reg:/^[\\u4e00-\\u9fa5\\w]{1,10}$/,\r\n                msg:'昵称格式不正确'\r\n            },\r\n\r\n            phone:{\r\n                reg: /^1[3-9]\\d{9}$/,\r\n                msg:'手机号格式不正确'\r\n            },\r\n            password:{\r\n                reg: /^[a-zA-Z]\\w{5,15}$/,\r\n                msg:'密码号格式不正确'\r\n            },\r\n            oldPassword:{\r\n                reg: /^[a-zA-Z]\\w{5,15}$/,\r\n                msg:'密码号格式不正确'\r\n            },\r\n\r\n            email:{\r\n                reg: /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/,\r\n                msg:'邮箱格式不正确'\r\n            },\r\n            code:{\r\n                reg: /^\\d{6}$/,\r\n                msg:'格式正确'\r\n            },\r\n            \r\n        }\r\n    }\r\n\r\n\r\n    //表单验证\r\n    validUserForm(o) {\r\n        //o:验证表单数据  ，类型：object\r\n\r\n        for(let key in o) {\r\n            if(!this.validUserFormReg[key].reg.test(o[key])){\r\n                Toast(this.validUserFormReg[key].msg);\r\n                return false;\r\n            }\r\n        }\r\n        //表单验证通过\r\n        return true;\r\n    }\r\n}\r\nexport default new ValidForm();"],"sourceRoot":""}